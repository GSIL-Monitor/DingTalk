/**
  * windmill.vue.min.js v0.3.3.
  */
console.log("Start windmill vue.min (0.3.3) framework. Build at 2018-07-20 12:23"),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e["windmill-vue"]=t()}(this,function(){"use strict";"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{writable:!0,enumerable:!1,configurable:!0,value:function(e,t){var n=arguments;if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),r=1;r<arguments.length;r++){var o=n[r];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])}return i}});var t,n,a=(t=1e5,function(){var e=String(t);return t+=1,e});function u(){return"undefined"!=typeof global?global:"undefined"!=typeof self?self:new Function("return this")()}function r(){if(!n){var e=u();e.__windmill_environment__?n=e.__windmill_environment__:console.error("[error][wml-w] missing __windmill_environment__")}return n||{}}function o(t,n,e){void 0===e&&(e=!0);var i=u();try{Object.defineProperty(i,t,{value:n,configurable:!0,enumerable:!0,writable:!e})}catch(e){i[t]=n}}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){return Object.prototype.toString.call(e).slice(8,-1)}function s(e){return"Object"===l(e)}function f(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t]}function i(i,r){var o;return void 0===r&&(r=0),"function"!=typeof setTimeout||"function"!=typeof clearTimeout?(console.warn("[Warn] There is no timer API in the current context."),i):function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=this;clearTimeout(o),o=setTimeout(function(){return i.apply(n,e)},r)}}var p=function(){},d={};function h(){return"object"==typeof process&&process&&process.env&&!1}function g(e,t){return h()?"function"==typeof __test_logger__&&(p=__test_logger__,!0):!0===d.debugMode||void 0}function v(e,t){g()&&p("debug",e)}function y(e,t){g()&&p("warn",e)}function m(e,t){g()&&p("error",e)}function b(e){m(e)}p=function(e,t){var n,i="["+((n=e).charAt(0).toUpperCase()+n.slice(1))+"][wml-w] "+t;console.log(i)};var _={miniApp:["setAppShareInfo","hideLauncherLoading"],network:["request"],mtop:["request"],storage:["length","setItem","getItem","removeItem"],memoryStorage:["setItem","getItem"],navigator:["push","pop","openMessagePage","reloadPage","getBackStack","popToHome"],user:["login","logout","info"],modal:["alert","confirm","toast"],navigatorBar:["show","hide","setTitle","setRightItem","setStyle","setDrawer","setActionSheet","hasIndexBadge","scaleIndexBadge","resetIndexBadge","getHeight","openDrawer","isDrawerOpened","closeDrawer","setLeftItem","showMenu","hideMenu","getStatusBarHeight"],clipboard:["writeText","readText"],picker:["pick","pickDate","pickTime","chooseCity"],webSocket:["webSocket","send","close","onOpen","onMessage","onClose","onError"],calendar:["addEvent","checkEvent","removeEvent"],connection:["getType","getDownlinkMax","onChange"],screen:["setAlwaysOn","setBrightness"],broadcast:["createChannel","postMessage","onMessage","close"],share:["doShare"],cookie:["read","write","getAllObjects"],audio:["load","play","pause","stop","setVolume","canPlayType"],wopc:["authLogin","checkAuthSession","doAuth","getSessionKey","setSessionKey"],WopcMtopPlugin:["request"],device:["onShake","vibrate"],keyboard:["hideKeyboard"],contact:["choosePhoneContact"],location:["getLocation"],alipay:["tradePay"],userTrack:["commit","commitut","commitEvent","customAdvance","pageAppear","pageDisappear","skipPage","updatePageUtparam","updateNextPageUtparam"],"nuvajs-exec":["exec"]};var e=function(){};e.prototype.$on=function(e,t){return void 0===t&&(t=f),v('$on "'+e+'"'),!e&&b("invalid event name "+e+" for windmill.$on."),t===f&&b("bind event "+e+" with no callback through windmill.$on."),this.bridge.onReceiveMessage({data:{type:e},origin:this.label,type:"Event"},t)},e.prototype.$once=function(e,t){return void 0===t&&(t=f),v('$once "'+e+'"'),!e&&b("invalid event name "+e+" for windmill.$once."),t===f&&b("bind event "+e+" with no callback through windmill.$once."),this.bridge.onReceiveMessage({data:{type:e,once:!0},origin:this.label,type:"Event"},t)},e.prototype.$off=function(e,t){return v('$off "'+e+'"'),!e&&b("invalid event name "+e+" for windmill.$off."),this.bridge.unbindEventListener("Event."+e,t)},e.prototype.$cycle=function(e,t){return void 0===t&&(t=f),v('$cycle "'+e+'"'),e&&/^app:|^page(:|@)/.test(e)||b("invalid lifecycle name "+e+" for windmill.$cycle."),t===f&&b("hook lifecycle "+e+" with no callback function through windmill.$cycle."),"AppWorker"!==this.label&&/^app:/.test(e)&&b("Shouldn't bind lifecycle hook for app in a page client."),this.bridge.onReceiveMessage({type:"Lifecycle",origin:this.label,data:{type:e}},t)},e.prototype.$decycle=function(e,t){return v('$decycle "'+e+'"'),e&&/^app:|^page(:|@)/.test(e)||b("invalid lifecycle name "+e+" for windmill.$decycle."),this.bridge.unbindEventListener("Lifecycle."+e,t)},e.prototype.$emit=function(e,t,n){return void 0===t&&(t={}),v('$emit("'+e+'")'),!e&&b("invalid event name "+e+" for windmill.$emit."),n&&n!==this.label?this.bridge.postMessage({data:{type:e,data:t},origin:this.label,target:n,type:"Event"}):this.bridge.emitEvent(""+e,t)},e.prototype.$callAsync=function(n,i){var r=this;return void 0===i&&(i={}),v('$callAsync "'+n+'"'),n||b("invalid method name "+n+" for windmill.$callAsync."),new Promise(function(e,t){r.bridge.dispatchMessage({type:"ModuleCall",origin:r.label,target:"AppWorker",data:{method:n,params:i}},e,t,!1)})},e.prototype.$call=function(e,t,n,i){return void 0===t&&(t={}),void 0===n&&(n=f),void 0===i&&(i=f),v('$call "'+e+'", params: '+JSON.stringify(t)),e||b("invalid method name "+e+" for windmill.$call."),this.bridge.dispatchMessage({type:"ModuleCall",origin:this.label,target:"AppWorker",data:{method:e,params:t}},n,i,!0)},e.prototype.$registerModules=function(e){!function(i,r){if(void 0===r&&(r=!1),s(i)){var e=function(t){var e=i[t];_[t]?r||y('The "'+t+'" module has already been registered.It would be overridden.'):_[t]=[];var n=_[t];Array.isArray(e)?e.forEach(function(e){-1===n.indexOf(e)?n.push(e):r||y('The "'+e+'" of the "'+t+'" module has already been registered.')}):m('Invalid parameter type! The method list of the "'+t+'" module should be an Array.')};for(var t in i)e(t)}else m("Invalid parameter type! The module definition is not a plain object.")}(e,!0)},e.prototype.$getAvailableModules=function(){return function(e){var t={};try{t=JSON.parse(JSON.stringify(e))}catch(e){}return t}(_)};var w="[[EVENT_MAP]]";function O(e,t){var n=e[w];return Array.isArray(n[t])||(n[t]=[]),n[t]}var A=function(){v("Create new EventEmitter."),Object.defineProperty(this,w,{configurable:!1,enumerable:!1,writable:!1,value:{}})};A.prototype.on=function(e,t){return v('EventEmitter: on("'+e+'")'),O(this,e).push({listener:t,once:!1,callCount:0}),this},A.prototype.once=function(e,t){return v('EventEmitter: once("'+e+'")'),O(this,e).push({listener:t,once:!0,callCount:0}),this},A.prototype.off=function(e,t){v('EventEmitter: off("'+e+'"'+(t?", listener":"")+")");var n=this[w];if(t){var i=n[e];if(Array.isArray(i)){var r=i.findIndex(function(e){return e.listener===t});-1!==r&&i.splice(r,1)}}else delete n[e];return this},A.prototype.emit=function(t){for(var n=[],e=arguments.length-1;0<e--;)n[e]=arguments[e+1];v('EventEmitter: emit("'+t+'", '+JSON.stringify(n)+")");var i=this[w],r=i[t];return Array.isArray(r)&&(i[t]=r.filter(function(e){try{e.listener.apply(null,n),e.callCount+=1}catch(e){return m('Failed to emit "'+t+'" event.'),m(e.toString()),!0}return!e.once})),this};var k=function(e){var t,n,i=this;this._env=r(),v("Create a new WorkerBridge. ("+JSON.stringify(this._env)+")"),this._emitter=new A,this._contextEmitter=new A,this._appContext=(t=this._contextEmitter,n=t,{addEventListener:function(e,t){v("Call addEventListener in app context: "+e),"function"==typeof t?n.on(e,t):m("invalid callback argument for addEventListener: "+t)},removeEventListener:function(e,t){v("Call removeEventListener in app context: "+e),t&&"function"!=typeof t?m("invalid callback argument for addEventListener: "+t):n.off(e,t)}}),o("__receive_message__",function(e,t){v("Receive message from container. (clientId: "+e+", data: "+JSON.stringify(t)+")"),i._handleMessageFromContainer(e,t)}),o("onmessage",function(e){v("Receive message from renderer. (message: "+JSON.stringify(e)+")"),i._handleMessageFromRenderer(e)})};k.prototype.dispatchMessage=function(e,t,n,i){e.target="Container",v("Dispatch message to container. (message: "+JSON.stringify(e)+")");var r=u();if("function"!=typeof r.__dispatch_message__){var o='Can\'t find the "__dispatch_message__" API on the current context.';return m(o),n({status:"JS_ERROR",error:o})}var a=e.origin,s=e.data,c=e.callbackId,l=function(e){return e.status&&"SUCCESS"===e.status?t(e):n(e)};if("iOS"===this._env.platform)try{r.__dispatch_message__(a,s,l)}catch(e){var f=e&&(e.message||e.toString())||"call __dispatch_message__ failed.";m(f),n({status:"JS_ERROR",error:f})}else r.__dispatch_message__(a,s,this._genCallbackId(l,{origin:a,keepAlive:i,callbackId:c}))},k.prototype._genCallbackId=function(e,t){var n=t.origin,i=t.keepAlive,r=t.callbackId,o=r||a();return this._emitter[i?"on":"once"]("callback@"+n+":"+o,e),o},k.prototype.onReceiveMessage=function(e,t){var n=e.type,i=e.data;void 0===i&&(i={});var r=i.once?"once":"on";this._emitter[r](n+"."+i.type,t)},k.prototype.unbindEventListener=function(e,t){this._emitter.off(e,t)},k.prototype.emitEvent=function(e,t){void 0===t&&(t={}),this._emitter.emit("Event."+e,{type:e,data:t})},k.prototype.postMessage=function(e){v("Post message to renderer. (message: "+JSON.stringify(e)+")");var t=u();if("function"!=typeof t.postMessage)return b("global postMessage API dosn't exist!");t.postMessage(e)},k.prototype.getAppContext=function(){return v("generate app context: {"+Object.keys(this._appContext).join(", ")+"}"),this._appContext},k.prototype._handleMessageFromContainer=function(e,t){var n=t.action,i=t.callbackId,r=t.result;switch(n){case"CALLBACK":this._emitter.emit("callback@"+e+":"+i,r);break;case"LIFECYCLE":var o=r.lifecycle,a=o.match(/^page:(\S+)$/);"AppWorker"!==e&&(a&&a[1]?o="page@"+e+":"+a[1]:o.match(/^page@/)&&b("invalid lifecycle name in __receive_message__: "+o+". Shouldn't include '@clientId' in it."),this.postMessage({type:"Lifecycle",origin:this._origin,target:e,data:r})),this._emitter.emit("Lifecycle."+o,r.options);break;case"EVENT":var s,c;"Global"===e?(s=this._contextEmitter,c=r.type):(s=this._emitter,c="Event."+r.type),s&&s.emit(c,r);break;default:b("invalid action type in __receive_message__: "+n)}},k.prototype._handleMessageFromRenderer=function(t){var n=this,e=t.type,i=t.data,r=t.origin,o=t.callbackId,a=t.keepAlive;r&&"AppWorker"!==r||b('Received a message from renderer with invalid "origin": '+r+". Should be a clientId.");var s=function(e){n.postMessage({origin:n._origin,target:r,type:"Callback",callbackId:o,data:e})};switch(e){case"ModuleCall":this.dispatchMessage(t,function(e){s(e)},function(e){m("Call native module failed! "+JSON.stringify(t.data)),m(JSON.stringify(e)),s(e)},a);break;case"Event":this._emitter.emit(e+"."+i.type,Object.assign({origin:r},i));break;default:b("unexpected message type posted from renderer: "+e+".")}};var S="[[RendererPageReady]]",$="[[ReceivedInitialState]]",C="[[RendererPageStateChange]]",I={launch:"onLaunch",show:"onShow",hide:"onHide",unload:"onUnload"},P={load:"onLoad",ready:"onReady",show:"onShow",hide:"onHide",unload:"onUnload"},x=function(r){function e(e){var t=this;r.call(this),v("Create a new WorkerRuntime. "+JSON.stringify(e)),this._activeRenderers=[],this.label="AppWorker",this.bridge=new k({origin:this.label});var n=e.name,i=e.getContext;o("__get_app_context__",function(){var e=i();return v("Get app running context ("+n+"). "+Object.keys(e)),Object.assign(t.bridge.getAppContext(),e)}),this._ready()}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype._ready=function(){var n=this;this.bridge.onReceiveMessage({origin:this.label,type:"Event",data:{type:"registerModules"}},function(t){t&&"registerModules"===t.type&&(v("Register available modules: ("+JSON.stringify(t.data)+")"),n.$registerModules(t.data),n._activeRenderers.forEach(function(e){n.bridge.postMessage({origin:n.label,target:e.label,type:"Event",data:t})}))}),this.bridge.onReceiveMessage({origin:this.label,type:"Event",data:{type:"[[RendererRuntimeReady]]"}},function(e){if(e&&s(e.data)){v("Receive renderer ready message. ("+JSON.stringify(e.data)+")"),n._activeRenderers.push(e.data);var t=e.data.label;n.bridge.postMessage({origin:n.label,target:t,type:"Event",data:{type:"registerModules",data:n.$getAvailableModules()}})}}),this.bridge.dispatchMessage({origin:"AppWorker",type:"ModuleCall",data:{method:"AppWorker.ready"}},function(){var e;e='Dispatched "AppWorker.ready" event success.',g()&&p("log",e)},function(){b('Failed to dispatch "AppWorker.ready" event.')})},e}(e),j=["$on","$once","$off","$emit","$cycle","$decycle","$call","$callAsync","$navTo","$getAvailableModules"];function E(e){!function(e){if(!e||!e.platform)return console.error("set logger environment failed.");Object.assign(d,e)}(r()),v("Setup Windmill worker framework.");var i,t,n=new x(e);return v("Prepare runtime APIs: "+JSON.stringify(j)),i=n,t={},j.forEach(function(n){"function"==typeof i[n]&&(t[n]=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return i[n].apply(i,e)})}),t}var ke="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var D,M,T=(function(e,t){function c(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0});var i=/[^\w.$]/;function o(e){if(!i.test(e)){var n=e.split(".");return function(e){for(var t=0;t<n.length;t++){if(!e)return;e=e[n[t]]}return e}}}Object.freeze({});function s(e){return null!==e&&"object"==typeof e}var a=Object.prototype.toString;function l(e){return"[object Object]"===a.call(e)}function r(e){var t=parseFloat(String(e));return 0<=t&&Math.floor(t)===t&&isFinite(e)}function n(e,t){for(var n=Object.create(null),i=e.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}n("slot,component",!0),n("key,ref,slot,slot-scope,is");function f(e,t){if(e.length){var n=e.indexOf(t);if(-1<n)return e.splice(n,1)}}var u=Object.prototype.hasOwnProperty;function p(e,t){return u.call(e,t)}Function.prototype.bind;function d(e,t){for(var n in t)e[n]=t[n];return e}function h(e,t,n){}var g,v=function(e,t,n){return!1},y="__proto__"in{},m="undefined"!=typeof window,b="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,_=b&&WXEnvironment.platform.toLowerCase(),w=m&&window.navigator.userAgent.toLowerCase(),O=(w&&/msie|trident/.test(w),w&&w.indexOf("msie 9.0"),w&&0<w.indexOf("edge/")),A=(w&&w.indexOf("android"),w&&/iphone|ipad|ipod|ios/.test(w)||"ios"===_),k=(w&&/chrome\/\d+/.test(w),{}.watch);if(m)try{var S={};Object.defineProperty(S,"passive",{get:function(){}}),window.addEventListener("test-passive",null,S)}catch(e){}var $=function(){return void 0===g&&(g=!m&&!b&&void 0!==ke&&ke.process&&ke.process.env&&"server"===ke.process.env.VUE_ENV),g},C=m&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function I(e){return"function"==typeof e&&/native code/.test(e.toString())}var P;"undefined"!=typeof Symbol&&I(Symbol)&&"undefined"!=typeof Reflect&&I(Reflect.ownKeys);P="undefined"!=typeof Set&&I(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var x=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],j={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:v,isReservedAttr:v,isUnknownElement:v,getTagNamespace:h,parsePlatformTagName:function(e){return e},mustUseProp:v,_lifecycleHooks:x},E=j.optionMergeStrategies;function D(e,t){if(!t)return e;for(var n,i,r,o=Object.keys(t),a=0;a<o.length;a++)i=e[n=o[a]],r=t[n],p(e,n)?l(i)&&l(r)&&D(i,r):fe(e,n,r);return e}function M(n,i,r){return r?function(){var e="function"==typeof i?i.call(r,r):i,t="function"==typeof n?n.call(r,r):n;return e?D(e,t):t}:i?n?function(){return D("function"==typeof i?i.call(this,this):i,"function"==typeof n?n.call(this,this):n)}:i:n}function T(e,t){return t?e?e.concat(t):Array.isArray(t)?t:[t]:e}function R(e,t,n,i){var r=Object.create(e||null);return t?d(r,t):r}function L(e,t,n){if(t)for(var i=t;i=i.$parent;){var r=i.$options.errorCaptured;if(r)for(var o=0;o<r.length;o++)try{if(!1===r[o].call(i,e,t,n))return}catch(e){N(e,i,"errorCaptured hook")}}N(e,t,n)}function N(e,t,n){if(j.errorHandler)try{return j.errorHandler.call(null,e,t,n)}catch(e){J(e,null,"config.errorHandler")}J(e,t,n)}function J(e,t,n){if(!m&&!b||"undefined"==typeof console)throw e;console.error(e)}E.data=function(e,t,n){return n?M(e,t,n):t&&"function"!=typeof t?e:M(e,t)},x.forEach(function(e){E[e]=T}),["component","directive","filter"].forEach(function(e){E[e+"s"]=R}),E.watch=function(e,t,n,i){if(e===k&&(e=void 0),t===k&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var r={};for(var o in d(r,e),t){var a=r[o],s=t[o];a&&!Array.isArray(a)&&(a=[a]),r[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return r},E.props=E.methods=E.inject=E.computed=function(e,t,n,i){if(!e)return t;var r=Object.create(null);return d(r,e),t&&d(r,t),r},E.provide=M;var W,F,V=[],U=!1;function H(){U=!1;for(var e=V.slice(0),t=V.length=0;t<e.length;t++)e[t]()}var B=!1;if("undefined"!=typeof setImmediate&&I(setImmediate))F=function(){setImmediate(H)};else if("undefined"==typeof MessageChannel||!I(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())F=function(){setTimeout(H,0)};else{var G=new MessageChannel,q=G.port2;G.port1.onmessage=H,F=function(){q.postMessage(1)}}if("undefined"!=typeof Promise&&I(Promise)){var K=Promise.resolve();W=function(){K.then(H),A&&setTimeout(h)}}else W=F;function X(e,t){var n;if(V.push(function(){if(e)try{e.call(t)}catch(e){L(e,t,"nextTick")}else n&&n(t)}),U||(U=!0,B?F():W()),!e&&"undefined"!=typeof Promise)return new Promise(function(e){n=e})}var z=0,Y=function(){this.id=z++,this.subs=[]};Y.prototype.addSub=function(e){this.subs.push(e)},Y.prototype.removeSub=function(e){f(this.subs,e)},Y.prototype.depend=function(){Y.target&&Y.target.addDep(this)},Y.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()},Y.target=null;var Q=[];function Z(e){Y.target&&Q.push(Y.target),Y.target=e}function ee(){Y.target=Q.pop()}var te=function(e,t,n,i,r,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ne={child:{configurable:!0}};ne.child.get=function(){return this.componentInstance},Object.defineProperties(te.prototype,ne);var ie=Array.prototype,re=Object.create(ie);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(a){var s=ie[a];c(re,a,function(){for(var e=arguments,t=[],n=arguments.length;n--;)t[n]=e[n];var i,r=s.apply(this,t),o=this.__ob__;switch(a){case"push":case"unshift":i=t;break;case"splice":i=t.slice(2)}return i&&o.observeArray(i),o.dep.notify(),r})});var oe=Object.getOwnPropertyNames(re),ae=!0,se=function(e){this.value=e,this.dep=new Y,this.vmCount=0,c(e,"__ob__",this),Array.isArray(e)?((y?function(e,t,n){e.__proto__=t}:function(e,t,n){for(var i=0,r=n.length;i<r;i++){var o=n[i];c(e,o,t[o])}})(e,re,oe),this.observeArray(e)):this.walk(e)};function ce(e,t){var n;if(s(e)&&!(e instanceof te))return p(e,"__ob__")&&e.__ob__ instanceof se?n=e.__ob__:ae&&!$()&&(Array.isArray(e)||l(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new se(e)),t&&n&&n.vmCount++,n}function le(n,e,i,t,r){var o=new Y,a=Object.getOwnPropertyDescriptor(n,e);if(!a||!1!==a.configurable){var s=a&&a.get,c=a&&a.set;s&&!c||2!==arguments.length||(i=n[e]);var l=!r&&ce(i);Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(n):i;return Y.target&&(o.depend(),l&&(l.dep.depend(),Array.isArray(e)&&function e(t){for(var n=void 0,i=0,r=t.length;i<r;i++)(n=t[i])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&e(n)}(e))),e},set:function(e){var t=s?s.call(n):i;e===t||e!=e&&t!=t||(c?c.call(n,e):i=e,l=!r&&ce(e),o.notify())}})}}function fe(e,t,n){if(Array.isArray(e)&&r(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n;var i=e.__ob__;return e._isVue||i&&i.vmCount?n:i?(le(i.value,t,n),i.dep.notify(),n):e[t]=n}se.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)le(e,t[n])},se.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)ce(e[t])};var ue=new P;function pe(e){(function e(t,n){var i,r,o=Array.isArray(t);if(!(!o&&!s(t)||Object.isFrozen(t)||t instanceof te)){if(t.__ob__){var a=t.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(o)for(i=t.length;i--;)e(t[i],n);else for(i=(r=Object.keys(t)).length;i--;)e(t[r[i]],n)}})(e,ue),ue.clear()}function de(e,t){if(t){if(e._directInactive=!1,function(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)de(e.$children[n]);he(e,"activated")}}function he(e,t){Z();var n=e.$options[t];if(n)for(var i=0,r=n.length;i<r;i++)try{n[i].call(e)}catch(n){L(n,e,t+" hook")}e._hasHookEvent&&e.$emit("hook:"+t),ee()}var ge=[],ve=[],ye={},me=!1,be=!1,_e=0;function we(){var e,t;for(be=!0,ge.sort(function(e,t){return e.id-t.id}),_e=0;_e<ge.length;_e++)(e=ge[_e]).before&&e.before(),t=e.id,ye[t]=null,e.run();var n=ve.slice(),i=ge.slice();_e=ge.length=ve.length=0,me=be=!(ye={}),function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,de(e[t],!0)}(n),function(e){for(var t=e.length;t--;){var n=e[t],i=n.vm;i._watcher===n&&i._isMounted&&he(i,"updated")}}(i),C&&j.devtools&&C.emit("flush")}var Oe=0,Ae=function(e,t,n,i,r){this.vm=e,r&&(e._watcher=this),e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.computed=!!i.computed,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.computed=this.sync=!1,this.cb=n,this.id=++Oe,this.active=!0,this.dirty=this.computed,this.deps=[],this.newDeps=[],this.depIds=new P,this.newDepIds=new P,this.expression="","function"==typeof t?this.getter=t:(this.getter=o(t),this.getter||(this.getter=function(){})),this.computed?(this.value=void 0,this.dep=new Y):this.value=this.get()};Ae.prototype.get=function(){var e;Z(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;L(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&pe(e),ee(),this.cleanupDeps()}return e},Ae.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Ae.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Ae.prototype.update=function(){var e=this;this.computed?0===this.dep.subs.length?this.dirty=!0:this.getAndInvoke(function(){e.dep.notify()}):this.sync?this.run():function(e){var t=e.id;if(null==ye[t]){if(ye[t]=!0,be){for(var n=ge.length-1;_e<n&&ge[n].id>e.id;)n--;ge.splice(n+1,0,e)}else ge.push(e);me||(me=!0,X(we))}}(this)},Ae.prototype.run=function(){this.active&&this.getAndInvoke(this.cb)},Ae.prototype.getAndInvoke=function(e){var t=this.get();if(t!==this.value||s(t)||this.deep){var n=this.value;if(this.value=t,this.dirty=!1,this.user)try{e.call(this.vm,t,n)}catch(e){L(e,this.vm,'callback for watcher "'+this.expression+'"')}else e.call(this.vm,t,n)}},Ae.prototype.evaluate=function(){return this.dirty&&(this.value=this.get(),this.dirty=!1),this.value},Ae.prototype.depend=function(){this.dep&&Y.target&&this.dep.depend()},Ae.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||f(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}},t.Watcher=Ae,t.observe=ce,t.setValue=fe,t.removeValue=function(e,t){if(Array.isArray(e)&&r(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||p(e,t)&&(delete e[t],n&&n.dep.notify())}},t.watchObject=function(e,t,n,i){return l(e)?(p(e,"_watchers")||c(e,"_watchers",[]),ce(e),new Ae(e,t,n,i,!1)):console.error("The watching target is not a plain object. ("+(r=e,a.call(r).slice(8,-1))+")"),e;var r},t.getValue=function(e,t){var n=o(t);if(n)return n(e);console.error('Failed to get the value of "'+t+'", only accepts simple dot-delimited paths.')},t.nextTick=X}(D={exports:{}},D.exports),D.exports);(M=T)&&M.__esModule&&Object.prototype.hasOwnProperty.call(M,"default")&&M.default;T.Watcher,T.observe;var R=T.setValue,L=(T.removeValue,T.watchObject),N=(T.getValue,T.nextTick),J=void 0,W=[];function F(){return J}var V=L;function U(t,n){function e(e){try{t.call(null,e.data)}catch(e){n(e)}}return void 0===n&&(n=f),W.push([t,e]),e}function H(e,t){if(s(t))for(var n in t){var i=t[n];s(e[n])&&s(i)?H(e[n],i):e[n]!==i&&R(e,n,i)}return e}function B(e,t,n){if(void 0===n&&(n=function(){return!0}),s(t))for(var i in t)(c(t,i)&&!c(e,i)||n(i))&&(e[i]=t[i]);return e}function G(e,n,i){if(void 0===i&&(i=function(){return!0}),s(e)&&s(n)){var t=function(t){(c(n,t)&&!c(e,t)||i(t))&&Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return n[t]},set:function(e){n[t]=e}})};for(var r in n)t(r)}}var q="[[InternalDescriptor]]";function K(e,t,n){var i={};for(var r in e){var o=!1;for(var a in t)if(r===t[a]){o=!0;break}if(o&&c(e,r)){var s=l(e[r]);"Function"===s?i[r]=e[r]:n(r,s)}}return i}function X(e){var t={};if(s(e))for(var n in e){var i=l(e[n]);"Function"===i?t[n]=e[n]:y('The "'+n+'" in the "methods" property should be a function, not "'+i+'".')}else m('The "methods" property must be a plain object, not "'+l(e)+'".');return t}function z(i,r){return function(e){for(var t in i)if(e===i[t])return!0;for(var n=0;n<r.length;++n)if(e===r[n])return!0;return!1}}function Y(n,e){var t={};if(!s(e))return m('The options of Page("'+n+'", {...}) must be a plain object, not "'+l(e)+'".'),t;c(e,"mixins")&&(t.mixins=function(e,n){void 0===n&&(n="");var i=[];return"Array"===l(e)?e.forEach(function(e){if(s(e)){var t={};Object.assign(t,K(e,P,function(e,t){m('The "'+e+'" in the mixins of page '+n+' must be a function, not "'+t+'".')})),c(e,"methods")&&(t.methods=X(e.methods)),i.push(t)}}):y("The mixins option in page "+n+" must be an array, not "+l(e)+", it will be ignored."),i}(e.mixins,n)),c(e,"data")?"Function"!==l(e.data)?(m('The "data()" method must be a function, not "'+l(e.data)+'".'),t.data=function(){return{}}):t.data=e.data:(y('The "data()" method should be passed when creating Page("'+n+'").'),t.data=function(){return{}}),Object.assign(t,K(e,P,function(e,t){m('The "'+e+'" lifecycle of page '+n+' must be a function, not "'+t+'".')})),c(e,"methods")&&(t.methods=X(e.methods));var i=z(P,["mixins","data","methods"]);for(var r in e)c(e,r)&&!i(r)&&m('The "'+r+'" in the definition of Page("'+n+'") is not valid. It will be ignored!');return t}var Q=function(e){s(e.methods)&&B(this,e.methods,function(e){y('Do not use the "'+e+'" as a method in current app, it conflicts with the internal API.')}),s(e.globalData)&&G(this,e.globalData,function(e){y('Do not use the "'+e+'" as a property in globalData, it conflicts with the method name or internal API.')})};function Z(e,t){return e+"@"+t["[[ClientId]]"]}var ee=function(e,t){var n=this;if(Object.defineProperty(this,"[[ClientId]]",{value:t.clientId}),Object.defineProperty(this,"name",{enumerable:!0,value:t.pageName}),s(e.methods)&&B(this,e.methods,function(e){y('Do not use the "'+e+'" as a method in current page, it conflicts with the internal API.')}),"Array"===l(e.mixins))for(var i=e.mixins.length-1;0<=i;--i){var r=e.mixins[i];s(r.methods)&&B(n,r.methods,function(e){y('The "'+e+'" method in the mixin is conflict with the methods of page "'+n.name+'" or other mixins.')})}};ee.prototype.$on=function(e,t){F().$on(Z(e,this),U(t))},ee.prototype.$once=function(e,t){F().$once(Z(e,this),U(t))},ee.prototype.$emit=function(e,t){var n=F();n.$emit(Z(e,this),t,this["[[ClientId]]"]),n.$emit(Z(e,this),t)},ee.prototype.$off=function(e,t){F().$off(Z(e,this),function(e){for(var t=0;t<W.length;++t){var n=W[t];if(n[0]===e)return W.splice(t,1),n[1]}return e}(t))},ee.prototype.$getGlobalData=function(){var e=de();return e?(v('Get the "globalData" of the app instance.'),e.globalData):(m("Can't find available app instance! An empty object is returned for $getGlobalData()."),{})},ee.prototype.$setGlobalData=function(e){var t=de();t?(v("Set global data to the app instance. ("+JSON.stringify(e)+")"),t.mergeData(e)):m("Can't find available app instance! Failed to $setGlobalData().")};var te=F,ne=G,ie=function e(o,n,i){if(void 0===n&&(n=function(){return!1}),void 0===i&&(i=""),!s(o))return o;var a={},t=function(r){if(c(o,r)){var t=i?i+"."+r:r;"Object"===l(o[r])?a[r]=e(o[r],n,t):Object.defineProperty(a,r,{enumerable:!0,configurable:!0,get:function(){return t=o,n=r,e=Object.getOwnPropertyDescriptor(t,n),(i=Object.create({valueOf:function(){return t[n]}})).enumerable=e.enumerable,i.configurable=e.configurable,i.get="function"==typeof e.get?e.get:function(){return t[n]},i.set="function"==typeof e.set?e.set:function(e){return t[n]=e},Object.defineProperty(i,q,{configurable:!0,value:!0}),i;var t,n,e,i},set:function(e){n(t,e)&&(o[r]=e)}})}};for(var r in o)t(r);return a},re=function e(t){if(s(t))for(var n in t)if(c(t,n)){var i=t[n];if(s(r=i)&&!0===r[q])delete i[q],delete t[n],Object.defineProperty(t,n,i);else switch(l(i)){case"Array":i.forEach(e);break;case"Object":e(i)}}var r},oe=V,ae=H,se=function e(t){switch(l(t)){case"Array":t.forEach(e);break;case"Object":for(var n in t)e(t[n])}},ce=N,le=function(e,t,n){this.id=t.clientId,this.name=t.pageName,v("Create a page instance. ("+this.id+", "+this.name+")"),this._app=n,this._options=e,this._context=new ee(this._options,t),this._lifecycles=P,this._shouldUpdate=!0,this._connected=!1,this._initData(),this._initLifecycle(),this._setupHandshake()};le.prototype._initData=function(){var t=this;this._data=this._options.data(ie(this._app.globalData,function(e){y('Do NOT modify the "'+e+'" of global data in the data() function of page "'+t.name+'".')}))||{},this._watch(this._app.globalData,function(){return re(t._data)}),ne(this._context,this._data,function(e){y('Do not use the "'+e+'" as a property in page data, it conflicts with the method name or internal API.')}),this._watch(this._data,function(){return se(t._data)})},le.prototype._initLifecycle=function(){var a=this,e=te(),t=function(i){var r=a._lifecycles[i],o=[];c(a._options,"mixins")&&"Array"===l(a._options.mixins)&&a._options.mixins.forEach(function(e){c(e,r)&&o.push(e[r])}),c(a._options,r)&&o.push(a._options[r]),0<o.length&&(v('Listening the "'+i+'" lifecycle of page ('+a.id+", "+a.name+")."),e.$cycle("page@"+a.id+":"+i,function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];v('Emit the "'+i+'" lifecycle of page ('+a.id+", "+a.name+").");try{for(var n=0;n<o.length;++n)o[n].apply(a._context,e)}catch(e){b('Failed to execute the "'+r+'" lifecycle hook of page '+a.name+". ("+a.id+")"),m(e.toString())}}))};for(var n in a._lifecycles)t(n);e.$cycle("page@"+this.id+":unload",function(){var e=de();e&&e.removePage(a.id),a.destroy()})},le.prototype._watch=function(e,t){var n=this;oe(e,t,i(function(){n._shouldUpdate?n.sendData():ce(function(){return n._shouldUpdate=!0})},1e3/60),{deep:!0})},le.prototype._setupHandshake=function(){var t=this;v('Setup handshake of page "'+this.name+'". (id: "'+this.id+'")');var e=te();e.$emit("[[WorkerPageReady]]@"+this.id,{clientId:this.id,pageName:this.name},this.id),e.$once(S+"@"+this.id,function(e){v('Received the "'+S+'" event of page "'+t.name+'". (id: "'+t.id+'")'),t.sendInitialState()}),e.$on(C+"@"+this.id,function(e){v("Receive a state mutation from renderer. ("+JSON.stringify(e)+")"),t._shouldUpdate=!1,t.mergeData(e.data)})},le.prototype.sendInitialState=function(){var e=this;if(this._connected)y('The initial data of page "'+this.name+'" has already been sent to renderer.');else{v("Send initial page state to renderer. ("+this.id+", "+this.name+", "+JSON.stringify(this._data)+")");var t=te();t.$emit("[[SendInitialState]]@"+this.id,{clientId:this.id,pageName:this.name,initialState:this._data},this.id),t.$on($+"@"+this.id,function(){return e._connected=!0})}},le.prototype.sendData=function(e){v("Send new page data to renderer. ("+this.id+", "+this.name+", "+JSON.stringify(e)+")"),te().$emit("[[WorkerPageStateChange]]@"+this.id,e||this._data,this.id)},le.prototype.mergeData=function(e){s(e)&&ae(this._data,e)},le.prototype.destroy=function(){v("Destroy a page instance. ("+this.id+", "+this.name+")");var e=te();for(var t in e.$off(S+"@"+this.id),e.$off($+"@"+this.id),e.$off(C+"@"+this.id),this._lifecycles)e.$decycle("page@"+this.id+":"+t);delete this.id,delete this.name,delete this._app,delete this._options,delete this._context,delete this._data,delete this._lifecycles,delete this._shouldUpdate,delete this._connected};var fe=function(e){v("Create a new app instance."),this._options=function(e){var t={};if(!s(e))return m('The parameter of App() must be a plain object, not "'+l(e)+'".'),t;c(e,"globalData")?s(e.globalData)?t.globalData=e.globalData:(m('The "globalData" property must be a plain object, not "'+l(e.globalData)+'".'),t.globalData={}):(y('The "globalData" property should be passed when creating an App().'),t.globalData={}),Object.assign(t,K(e,I,function(e,t){m('The "'+e+'" lifecycle of app must be a function, not "'+t+'".')})),c(e,"methods")&&(t.methods=X(e.methods));var n=z(I,["globalData","methods"]);for(var i in e)c(e,i)&&!n(i)&&m('The "'+i+'" in the definition of App() is not valid. It will be ignored!');return t}(e),this._context=new Q(this._options),this._pageOptions={},this._pages={},this._lifecycles=I,this.activePage=void 0,this.globalData=e.globalData||{},this._initLifecycle(),this._startListening()};fe.prototype._initLifecycle=function(){var o=this,e=F(),t=function(n){var i=o._lifecycles[n];if(c(o._options,i)){var r=o._options[i];"function"==typeof r?(v('Listening the "'+n+'" lifecycle of app.'),e.$cycle("app:"+n,function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];v('Emit the "'+n+'" lifecycle of app.');try{r.apply(o._context,e)}catch(e){b('Failed to execute the "'+i+'" lifecycle hook of the app.'),m(e.toString())}})):y('The lifecycle hook "'+i+'" must be a function, not '+l(r)+".")}};for(var n in o._lifecycles)t(n);e.$cycle("app:unload",function(){o.destroy(),ue=void 0})},fe.prototype._startListening=function(){var i=this,e=F();e.$on("beforePageCreate",function(e){v("Before Page Create. ("+JSON.stringify(e)+")"),i.createPage(e.data)}),e.$on("afterPageCreate",function(e){v("After Page Create. ("+JSON.stringify(e)+")");var t=e.data||{},n=i.getPage(t.clientId);n instanceof le&&n.sendInitialState()})},fe.prototype.getContext=function(){return this._context},fe.prototype.mergeData=function(e){s(e)&&H(this.globalData,e)},fe.prototype.registerPage=function(e,t){e&&"String"===l(e)?(this._pageOptions[e]&&y('The page "'+e+'" has already been registered! The new definition will override the previous one.'),this._pageOptions[e]=Y(e,t)):m('Invalid page name: "'+e+'"!')},fe.prototype.createPage=function(e){var t=e.clientId,n=e.pageName,i=this._pageOptions[n];if(i)if(this.getPage(t))m('The page "'+t+'" has already been created! The former page instance will be override.');else{var r=new le(i,e,this);r.sendInitialState(),this._pages[t]=r,this.activePage=r}else m('Failed to find the corresponding options of page "'+n+'"')},fe.prototype.getPage=function(e){if(e&&this._pages[e]instanceof le)return this._pages[e]},fe.prototype.removePage=function(e){v("Remove the page instance ("+e+") from current app."),this.activePage===this._pages[e]&&(this.activePage=void 0),delete this._pages[e]},fe.prototype.destroy=function(){v("Destroy the app instance.");var e=F();for(var t in e.$off("beforePageCreate"),e.$off("afterPageCreate"),this._lifecycles)e.$decycle("app:"+t);delete this._options,delete this._context,delete this._pageOptions,delete this._pages,delete this._lifecycles,delete this.activePage,delete this.globalData};var ue=void 0;function pe(e){ue instanceof fe?m("The app instance has already been created! It should be singleton."):ue=new fe(e)}function de(){return ue}function he(){var e=de();if(e)return e.getContext()}function ge(e,t){v('Register page options of "'+e+'".');var n=de();n?n.registerPage(e,t):m('Can\'t find available app instance. Please call "App({ ... })" to create an app at first.')}function ve(){var e,t=r();t&&(t.frameworkType="Vue",t.frameworkVersion="0.3.3"),e=E({name:"Vue",getContext:function(){var i,e,r,t={App:pe,Page:ge};return t.getApp=he,t.requireModule=(i=F,r=e||function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return(e=i()).$call.apply(e,t)},function(i){if(!i)return v("Require a universal module proxy."),{call:r};var e=_[i];if(Array.isArray(e)){v('Require the "'+i+'" module.');var t={};return e.forEach(function(n){t[n]=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return r.apply(void 0,[i+"."+n].concat(e))}}),t}y('Require unknown module "'+i+"\".It may not exist or haven't been registered.")}),h()&&(t.__get_app__=de),t}}),J=e}return h()||ve(),ve});